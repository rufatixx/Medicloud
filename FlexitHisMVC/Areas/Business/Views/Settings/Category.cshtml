@model Medicloud.ViewModels.CreateOrganizationVM

<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 row text-center justify-content-center">
            <form id="categoryForm" method="post" enctype="multipart/form-data" asp-action="Category" asp-controller="Settings" asp-area="Business">

                <div class="">
                    <input type="hidden" asp-for="id" />


                </div>
                <div class="d-flex justify-content-between px-0 mb-2">
                    <div class="d-flex align-items-center">
                        <a class="btn btn-sm ps-0" asp-action="Details" asp-controller="Settings" asp-route-organizationId="" asp-area="Business">
                            <svg width="32px" height="32px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="#737373">
                                <path fill="#737373" d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path>
                                <path fill="#737373" d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"></path>
                            </svg>
                        </a>
                        <h2 class="ms-2 text-muted">Biznes Kateqoriyaları</h2>
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end align-items-center">
                        @*<button type="button" id="cancelButton" class="btn border r-2">Ləğv et</button>*@
                        <button id="saveButton" class="btn btn-primary">Yadda saxla</button>
                    </div>
                </div>
                <div class="card border-0">



                    <div class="card-body ">

                        <div class="alert alert-danger" role="alert" id="errorMessage" style="display:none;">
                            Zəhmət olmasa, ən azı bir kateqoriya seçin.
                        </div>
                        @*<div class="row">
                                @for (int i = 0; i < 6 && i < Model.Categories.Count; i++)
                                {
                                    var category = Model.Categories[i];
                                    <div class="col-md-4">
                                        <div class="form-check mb-3">
                                            <input type="checkbox" style="cursor:pointer;" class="form-check-input" name="SelectedCategories" value="@category.id"
                                                   @(Model.SelectedCategories.Contains(category.id) ? "checked" : "")
                                                   id="checkInput@(category.id)">

                                            <label class="form-check-label" style="cursor:pointer;" for="checkInput@(category.id)">
                                                <img class="rounded-circle" style="object-fit:cover;" height="120" width="120" src="~/barbershop.jpg" />
                                                <div>
                                                    @category.name
                                                </div>

                                            </label>
                                        </div>

                                    </div>
                                }
                            </div>*@


                        <div class="row">
                            @foreach (var category in Model.Categories)
                            {
                                <div class="col-md-6">
                                    <div class="form-check text-start mb-2">
                                        <input type="checkbox" style="cursor:pointer;" class="form-check-input" name="SelectedCategories" value="@category.id" id="checkInput@(category.id)"
                                               @(Model.SelectedCategories.Contains(category.id) ? "checked" : "")>
                                        <label class="form-check-label " style="cursor:pointer;" for="checkInput@(category.id)">@category.name</label>
                                    </div>
                                </div>
                            }
                        </div>

                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        const $form = $('#categoryForm');
        const $checkboxes = $("input[name='SelectedCategories']");
        const $errorMessage = $("#errorMessage");

        $form.on('submit', function (event) {
            // Prevent the form from submitting immediately
            event.preventDefault();

            // Check if at least one checkbox is selected
            const selectedCategories = $("input[name='SelectedCategories']:checked");

            if (selectedCategories.length === 0) {
                // If no categories are selected, show an error message
                $errorMessage.show();

                // Apply red border to all checkboxes
                $checkboxes.css("border", "1px solid red");

                return false; // Stop form submission
            }

            // If categories are selected, submit the form
            $form.off('submit').submit();
        });

        // When any checkbox is changed, remove the red border from all checkboxes
        $checkboxes.on('change', function () {
            $checkboxes.css("border", "none");
            $errorMessage.hide();

        });


    </script>
}