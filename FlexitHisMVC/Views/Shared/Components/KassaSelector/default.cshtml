@model List<Kassa>;
<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="selectedKassaButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        @ViewBag.SelectedKassaName
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="selectedKassaDropdown">
        @foreach (var item in Model)
        {
            <a id="@item.kassaID" class="dropdown-item" onclick="UpdateKassaSelection('@item.kassaID','@item.name')">@item.name</a>


        }
    </div>
</div>
<script>function UpdateKassaSelection(id, name) {
    //    localStorage.setItem('selectedOrganization', id);
    //localStorage.setItem('kassaName', name);
    //    //$selectedOrganizationName.text(name);
    //    //$organizationLogo.text(organization.organizationName);

    saveUserSetting("Medicloud_kassaID", id)
            .then(() => {
                // After saving selectedOrganization, save the next setting
                return saveUserSetting("Medicloud_kassaName", name);
            })
            .then(() => {
                // After all settings are saved, refresh the page
                console.log('All settings saved, refreshing page.');
                window.location.reload();
            })
            .fail((error) => {
                // Handle any errors that occurred during the save operations
                console.error("Error saving settings: ", error);
            });


    }</script>
